# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

# Settings for Cloud Run
runConfig:
  # Minimum number of container instances that are kept warm.
  # Default is 0, which means it can scale to zero.
  minInstances: 0
  # Maximum number of container instances that can be spun up.
  # Adjust based on expected traffic and budget.
  maxInstances: 10
  # The number of concurrent requests that can be handled by each instance.
  # Default is 80.
  concurrency: 80
  # CPU allocation for each instance. 1 is often a good starting point.
  # Can be a value like 1, 2, 4.
  cpu: 1
  # Memory allocation for each instance in MiB.
  # Common values: 256, 512, 1024, 2048.
  memoryMiB: 512

# Environment variables and secrets
# https://firebase.google.com/docs/app-hosting/configure-env
env:
  - variable: FIREBASE_SERVICE_ACCOUNT_JSON_STRING
    secret: firebase-service-account-isac-studio # Make sure this matches the name of your secret in Secret Manager
    availability:
      - RUNTIME # Only needed at runtime for the server actions to connect to Firestore

  # Example of a plain text environment variable
  # - variable: MY_OTHER_VARIABLE
  #   value: "my_value"
  #   availability: # Optional: defaults to RUNTIME if not specified
  #     - BUILD
  #     - RUNTIME

  # Example of another environment variable referencing a secret in Cloud Secret Manager
  # - variable: ANOTHER_API_KEY
  #   secret: anotherApiKeySecretName # Name of the secret in Secret Manager

  # Example of a secret with a specific version
  # - variable: PINNED_API_KEY
  #   secret: myApiKeySecretName@5

  # Example using the full secret path (useful if secret is in a different project)
  # - variable: VERBOSE_API_KEY
  #   secret: projects/your-gcp-project-id/secrets/yourSecretID
  # - variable: PINNED_VERBOSE_API_KEY
  #   secret: projects/your-gcp-project-id/secrets/yourSecretID/versions/5
